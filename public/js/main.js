// Generated by CoffeeScript 1.9.0

/*

This is where all of the common custom javascript will be implemented. It has
been included in the baseloayout.jade file

Dependencies:
	jQuery
	AngularJS
 */

(function() {
  $(".dropdown").on("show.bs.dropdown", function(e) {
    return $(this).find(".dropdown-menu").first().stop(true, true).slideDown(200);
  });

  $(".dropdown").on("hide.bs.dropdown", function(e) {
    e.preventDefault();
    return $(this).find(".dropdown-menu").first().stop(true, true).slideUp(200, function() {
      return $(this).parent().removeClass("open");
    });
  });


  /*
  jQuery plugin: shakeIt
  shake it sh-sh-shake it
   */

  (function($) {
    return $.fn.shakeIt = function() {
      var theShakenOne;
      theShakenOne = this;
      theShakenOne.addClass('shakeText');
      theShakenOne.one('webkitAnimationEnd oanimationend msAnimationEnd animationend', function(e) {
        return theShakenOne.removeClass('shakeText');
      });
      return this;
    };
  })(jQuery);

  $(document).ready(function() {
    var $bar;
    $bar = $('#gameStats');
    $bar.text('Loading game stats..');
    return $.ajax({
      type: 'POST',
      url: '/data/getGameStatus',
      data: JSON.stringify({}),
      contentType: 'application/json',
      success: function(res) {
        if (res.success) {
          if (res.data.gameTitle != null) {
            return $bar.text(res.data.gameTitle + ' | ' + res.data.hCount + ' Humans ' + res.data.zCount + ' Zombies');
          } else {
            return $bar.text("No game is being played");
          }
        } else {
          $bar.text('Error loading game stats');
        }
      },
      error: function() {
        $bar.text('Unable to load game stats');
      }
    });
  });

}).call(this);
